import{r as _,c as k,b as d,d as e,t as m,F as x,e as h,p as V,g as a,v as c,q as g,f as B,i as I,k as E,w as S,a as L,o as i,m as M,s as U}from"./index-x6nNtJ2l.js";import{g as C}from"./cartService-DZzogGRM.js";const F={class:"container"},P={class:"row g-5"},T={class:"col-mb-5 col-lg-4 order-md-last"},j={class:"mb-3"},D={class:"badge bg-primary rounded-pill align-middle"},O={class:"items list-group mb-3"},R={class:"p-3 list-group-item d-plex justify-content-between"},q={class:"my-0"},$={class:"text-muted"},z={class:"border p-4 bg-light h5 rounded text-center total-price"},A={class:"col-md-7 col-lg-8"},G={class:"row g-3"},H={class:"col-12"},J={class:"col-12 pt-1"},K={class:"my-3"},Q={class:"form-check"},W={class:"form-check"},X={key:0,class:"pt-1"},et={__name:"OrderForm",setup(Y){const v=L(),s=_({items:[],form:{name:"",address:"",payment:"card",cardNumber:""}}),u=k(()=>{let r=0;return s.items.forEach(t=>{r+=t.price-t.price*t.discountPer/100}),r}),w=async()=>{var t,l,o,p,f,b,y;if((t=s.form.name)!=null&&t.trim())if((o=s.form.address)!=null&&o.trim()){if(s.form.payment==="card")if((f=s.form.cardNumber)!=null&&f.trim()){if(s.form.cardNumber.length>16||parseInt(s.form.cardNumber).toLocaleString()!==s.form.cardNumber){window.alert("카드 번호는 16자 이하의 숫자입니다."),(y=document.getElementById("cardNum"))==null||y.focus();return}}else{window.alert("카드 번호를 입력해주세요"),(b=document.getElementById("cardNum"))==null||b.focus();return}}else{window.alert("주소를 입력해주세요"),(p=document.getElementById("address"))==null||p.focus();return}else{window.alert("이름을 입력해주세요"),(l=document.getElementById("name"))==null||l.focus();return}if(s.form.payment!=="card"&&(s.form.cardNumber=""),s.form.itemIds=s.items.map(n=>n.id),(await U(s.form)).status===200){const n=["주문완료"];if(s.form.payment==="bank"){const N=u.value.toLocaleString();n.push(`한국은행 123-4567-5555 계좌로 ${N}원을 입금해주세요`)}window.alert(n.join(`
`)),await v.push("/")}};return async function(){const t=await C();t.status===200&&(s.items=t.data)}(),(r,t)=>{const l=E("lable");return i(),d("form",{class:"order-form",onSubmit:S(w,["prevent"])},[e("div",F,[t[15]||(t[15]=e("div",{class:"py-5 text-center"},[e("div",{class:"h4"},[e("b",null,"주문하기")]),e("p",{class:"h6 font-lg mt-3"},"주문내역을 확인하시고 주문 버튼을 클릭해주세요")],-1)),e("div",P,[e("div",T,[e("div",j,[t[5]||(t[5]=e("span",{class:"h5 mb-3 align-middle me-2"},[e("b",null,"구입목록")],-1)),e("span",D,m(s.items.length),1)]),e("ul",O,[(i(!0),d(x,null,h(s.items,o=>(i(),d("li",R,[e("div",null,[e("h6",q,m(o.name),1)]),e("span",$,m((o.price-o.price*o.discountPer/100).toLocaleString())+"원",1)]))),256))]),e("div",z,[t[6]||(t[6]=e("span",null,"합계",-1)),e("b",null,m(u.value.toLocaleString())+"원",1)]),t[7]||(t[7]=e("button",{type:"submit",class:"w-100 btn btn-primary py-4 mt-4"},"결제하기",-1))]),e("div",A,[t[13]||(t[13]=e("div",{class:"h5 mb-3"},[e("b",null,"주문자정보")],-1)),e("div",G,[e("div",H,[t[8]||(t[8]=e("label",{for:"name",class:"form-label"},"이름",-1)),a(e("input",{type:"text",class:"form-control p-3",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s.form.name=o)},null,512),[[c,s.form.name]])]),e("div",J,[t[9]||(t[9]=e("label",{for:"address",class:"form-label"},"주소",-1)),a(e("input",{type:"text",class:"form-control p-3",id:"address","onUpdate:modelValue":t[1]||(t[1]=o=>s.form.address=o)},null,512),[[c,s.form.address]])])]),t[14]||(t[14]=e("div",{class:"h5 mt-5 mb-3"},[e("b",null,"결제수단")],-1)),e("div",K,[e("div",Q,[a(e("input",{id:"card",name:"paymentMethod",type:"radio",class:"form-check-input",value:"card","onUpdate:modelValue":t[2]||(t[2]=o=>s.form.payment=o)},null,512),[[g,s.form.payment]]),t[10]||(t[10]=e("label",{class:"form-check-label",for:"card"},"신용카드",-1))]),e("div",W,[a(e("input",{id:"bank",name:"paymentMethod",type:"radio",class:"form-check-input",value:"bank","onUpdate:modelValue":t[3]||(t[3]=o=>s.form.payment=o)},null,512),[[g,s.form.payment]]),t[11]||(t[11]=e("label",{class:"form-check-label",for:"bank"},"무통장입금",-1))])]),s.form.payment==="card"?(i(),d("div",X,[B(l,{for:"cardNum",class:"form-label"},{default:I(()=>t[12]||(t[12]=[M("카드번호")])),_:1}),a(e("input",{type:"text",class:"form-control p-3",id:"cardNum","onUpdate:modelValue":t[4]||(t[4]=o=>s.form.cardNumber=o)},null,512),[[c,s.form.cardNumber]])])):V("",!0)])])])],32)}}};export{et as default};
